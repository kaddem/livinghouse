$(document).ready(function(){

  // бургер, что тут еще скажешь? но без колы(
  $('.burger').on('click', function(e){
      e.preventDefault();
      if ( $(this).hasClass("burger--close") ) {
          $(this).removeClass('burger--close');
          $('.main-nav').slideUp(400);
          $('.main-nav').removeClass('main-nav--open');
          $('.page-header').removeClass('page-header--open');
      } else {
          $(this).addClass('burger--close');
          $('.main-nav').slideDown(400);
          $('.main-nav').addClass('main-nav--open');
          $('.page-header').addClass('page-header--open');
      }
  });

  $('.nav ul a').on('click', function(e){
      if ($(window).width() < 768) {
          $('.main-nav').slideUp(400);
          $('.burger').addClass('burger--open');
          $('.burger').removeClass('burger--close');
      };
  });


  $(window).resize(function(){
      if( $(window).width() > 767 ) {
          $('.main-nav').show();
      } else {
          $('.main-nav').slideUp(400);
          $('.main-nav').removeClass('main-nav--open');
          $('.page-header').removeClass('page-header--open');
          $('.burger').removeClass('burger--close');
      }
  });

  $(window).on('scroll', function(e) { // отслеживаем событие на элементе window
    if( $(window).width() < 768 ) {
        $('.main-nav').slideUp(400);
        $('.main-nav').removeClass('main-nav--open');
        $('.page-header').removeClass('page-header--open');
        $('.burger').removeClass('burger--close');
    }
  });

  if ( $(window).scrollTop() > 100 && $(window).width() > 767) {
    $('.page-header').addClass('page-header--scroll');
    $('.page-header').addClass('page-header--desktop');
  } else if ( $(window).scrollTop() > 100 ) {
    $('.page-header').addClass('page-header--scroll');
  }

  $(window).on('scroll', function(e) {

    if ( $(window).scrollTop() > 100 && $(window).width() > 1199 ) {
      $('.page-header').addClass('page-header--scroll');
      $('.page-header').addClass('page-header--desktop');
    } else if ( $(window).scrollTop() > 100 ) {
      $('.page-header').addClass('page-header--scroll');
      $('.page-header').removeClass('page-header--desktop');
    } else {
      $('.page-header').removeClass('page-header--scroll');
      $('.page-header').removeClass('page-header--desktop');
    }

  });

});
$(document).ready(function(){

  $(function(){

    var dateEnd = $('#countdown-promo').data('timer-hours');
  
    var note = $('#note'),
      ts = new Date(2012, 0, 1),
      newYear = true;
    
    if((new Date()) > ts){
      // The new year is here! Count towards something else.
      // Notice the *1000 at the end - time must be in milliseconds
      ts = (new Date()).getTime() + dateEnd*24*60*60*1000;
      newYear = false;
    }


      
    $('#countdown-promo').countdown({
      timestamp : ts,
      callback  : function(days, hours, minutes, seconds){
        
        var message = "";
        
        message += days + " day" + ( days==1 ? '':'s' ) + ", ";
        message += hours + " hour" + ( hours==1 ? '':'s' ) + ", ";
        message += minutes + " minute" + ( minutes==1 ? '':'s' ) + " and ";
        message += seconds + " second" + ( seconds==1 ? '':'s' ) + " <br />";
        
        if(newYear){
          message += "left until the new year!";
        }
        else {
          message += "left to 10 days from now!";
        }
        
        note.html(message);
      }
    });
    
  });

});
$(document).ready(function(){

  // Закрытие дропдаунов по клику вне их

  function closeOutDropdown(dropDown, input) {

    $(document).mouseup(function (e){ // событие клика по веб-документу
      var drop = $(dropDown); // тут указываем ID элемента
      var inp = $(input);
      if (inp.is(e.target)) {
        return;
      } else if (!drop.is(e.target) // если клик был не по нашему блоку
          && drop.has(e.target).length === 0) { // и не по его дочерним элементам
        drop.hide(); // скрываем его
      } 
    });

  }

  closeOutDropdown('.form__dropdown', '.form__selected');
  closeOutDropdown('.projects-filter__dropdown', '.projects-filter__selected');
  closeOutDropdown('.form-review__dropdown', '.form-review__selected');

  function clickSelect(select, dropList){

    $(select).on('click', function(e){
    
      var dropDown = $(this).find(dropList);
      var everDropDown = $(dropList);
      
      if ( dropDown.is(':visible') ) {
        everDropDown.hide();
      } else if ( dropDown.is(':hidden') ) {
        everDropDown.hide();
        dropDown.show();
      } 
      
    });

  }

  clickSelect('.form__select', '.form__dropdown');
  clickSelect('.projects-filter__select', '.projects-filter__dropdown');
  clickSelect('.form-review__select', '.form-review__dropdown');

});
$(document).ready(function(){
  
  function closeOutDropdown(dropDown, input) {

      $(document).mouseup(function (e){ // событие клика по веб-документу
        
        if ( $('.project-form__value-list').hasClass('project-form__value-list--active')) {
          var drop = $(dropDown); // тут указываем ID элемента
          var inp = $(input);
          if (inp.is(e.target)) {
            return;
          } else if (!drop.is(e.target) // если клик был не по нашему блоку
              && drop.has(e.target).length === 0) { // и не по его дочерним элементам
            drop.removeClass('project-form__value-list--active'); // скрываем его
          } 
        }

      });

  }
  
  closeOutDropdown('.project-form__value-list', '.project-form__value-label');
  
  
  $('.project-form__value-label').on('click', function(){
    
    var inputId = $( this ).attr('for');
    var inputThis = $ ('#' + inputId );
    var parent = $( this ).parent();
    
    if ( inputThis.prop("checked") ) {
      $('.project-form__value-list').removeClass('project-form__value-list--active');
      $( parent ).addClass('project-form__value-list--active');
    } else {
      $( parent ).removeClass('project-form__value-list--active');
    }
    
  });
  
});
$(document).ready(function(){

  $('.project-form__title--accordeon').on('click', function(){

    var showBlock = $('#dropdown-table');

    if ( (showBlock ).hasClass('project-form__table--hide') ) {
      $( this ).addClass('project-form__title--open');
      $(showBlock).slideDown(200);
      $(showBlock).removeClass('project-form__table--hide');
    } else {
      $( this ).removeClass('project-form__title--open');
      $(showBlock).slideUp(200);
      $(showBlock).addClass('project-form__table--hide');
    }

  });

});
$(document).ready(function(){

  // Определяем переменные для значка info
  var infoClass = 'project-form__info';
  var infoIcon = $('.' + infoClass);

  // Определяем переменные для модалки
  var modalClass = 'project-modal';
  var modal = $('.' + modalClass);

  infoIcon.on('click', function(){
    var logic;

    if ( $(this).hasClass(infoClass + '--open') ) {
      infoIcon.removeClass(infoClass + '--open');
    } else {
      infoIcon.removeClass(infoClass + '--open');
      $(this).addClass(infoClass + '--open');
    }

    if ( infoIcon.hasClass(infoClass + '--open') ) {
      modalOpen( this , modalClass);
    } else {
      modalClose( modalClass );
    }

    function modalOpen(infoItem, modalClass) {

      var iconCoordX = $(infoItem).offset().left;
      var iconCoordY = $(infoItem).offset().top;

      var modal = $('.' + modalClass);
      var modalWidth = modal.outerWidth();
      var modalHeight = modal.outerHeight();

      var modalCoordX = iconCoordX - 30;
      var modalCoordY = iconCoordY - modalHeight - 10;

      modal.addClass(modalClass + '--open');

      if ( $(window).width() > 1199 ) {
        modal.css({
          "top": modalCoordY, 
          "left": modalCoordX
        });
      } else if ( $(window).width() < 768 ) {
        modal.css({
          "top": modalCoordY + modalHeight + 40, 
          "left": 0,
          "right": 0,
          "margin": "auto"
        });
      } else {
        modal.css({
          "top": modalCoordY, 
          "left": "150px"
        });
      }

    }

    function modalClose(modalClass) {
      var modal = $('.' + modalClass);
      modal.removeClass(modalClass + '--open');
    }

  })

});
$(document).ready(function(){

  function tabs(boxTabsLink, boxTabsContent, tabs){ 
    $(boxTabsLink + ' input').on('click', function(e){
      var attrLink = $(this).attr('id');
      $(boxTabsContent + ' ' + tabs).css("display", "none");
      $(boxTabsContent + ' .' + attrLink).css("display", "block");
    }); 
  };


  tabs('#tabs-roof', '#tabs-roof-content', '.project-form__table-select--roof-content');
  tabs('#tabs-frame', '#tabs-frame-content', '.project-form__tab-item');

});
$(document).ready(function(){

  $('.promo-slider').slick({
    dots: true
    // autoplay: true,
    // autoplaySpeed: 500
  });

});
$(document).ready(function(){

  function abc2(n) {
    n += "";
    n = new Array(4 - n.length % 3).join("U") + n;
    return n.replace(/([0-9U]{3})/g, "$1 ").replace(/U/g, "");
  }

  $('.project-form__plus-minus').on('click', function(){
    var thisElem = $(this);
    var input = $('.project-form__input-quant');
    var value = Number( input.val() );
    var price = $('#pile-price').data( 'one-price' );

    if ( value == 0 && $(thisElem).hasClass( 'project-form__plus-minus--plus' ) ) {
      value = value + 1;
      $(input).val(value);
    } else if ( value == 0 ){
      return;
    } else if ( $(thisElem).hasClass( 'project-form__plus-minus--plus' ) ){
      value = value + 1;
      $(input).val(value);
    } else {
      value = value - 1;
      $(input).val(value);
    }

    var priceSumm = abc2(price * value);

    $('#price-summ').text(priceSumm);

  })


  $('.project-form__action-label').on('click', function(){

    var parent = $(this).parent();
    var check = $(parent).find('.project-form__action-check');

    if ( $(check).prop("checked") ) {
      $(this).text('Добавить');
    } else {
      $(this).text('Добавлено');
    }

  });

});
$(window).load(function() {

  function ratioPhoto(block) {
    $(block).each(function(){
      var itemWidth = $(this).width();
      var itemHeight = $(this).height();
      var itemRatio = itemHeight / itemWidth;

      var photo = $(this).find('img');
      var photoWidth = photo.width();
      var photoHeight = photo.height();
      var photoRatio = photoHeight / photoWidth;

      if ( itemRatio < photoRatio ) {
        photo.width('100%');
        photo.height('auto');
      } else if (itemRatio > photoRatio) {
        photo.height('100%');
        photo.width('auto');
      } else {
        photo.width('100%');
        photo.height('auto');
      }
    });
  }

  function ratioLetter(block) {
    $(block).each(function(){
      var itemWidth = $(this).width();
      var itemHeight = $(this).height();
      var itemRatio = itemHeight / itemWidth;

      var photo = $(this).find('img');
      var photoWidth = photo.width();
      var photoHeight = photo.height();
      var photoRatio = photoHeight / photoWidth;

      if ( itemRatio > photoRatio ) {
        photo.width('100%');
      } else if (itemRatio < photoRatio) {
        photo.height('100%');
      } else {
        photo.width('100%');
      }
    });
  }

  ratioPhoto('.review__slider-preview-item');
  ratioPhoto('.review__slider-big-item');
  ratioLetter('.review__letter-box');
  ratioLetter('.review__chart-box');
  ratioPhoto('.gallery__item');
  ratioPhoto('.project-card__photo');
  ratioPhoto('.review-card__visual');
  ratioPhoto('.project__photo');

  $(window).resize(function(){
    ratioPhoto('.review__slider-preview-item');
    ratioPhoto('.review__slider-big-item');
    ratioLetter('.review__letter-box');
    ratioLetter('.review__chart-box');
    ratioPhoto('.gallery__item');
    ratioPhoto('.project-card__photo');
    ratioPhoto('.review-card__visual');
    ratioPhoto('.project__photo');
  });

});
$(document).ready(function(){

  $('.review__slider-big').slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    arrows: false,
    fade: true,
    asNavFor: '.review__slider-preview'
  });

  $('.review__slider-preview').slick({
    slidesToShow: 4,
    slidesToScroll: 1,
    asNavFor: '.review__slider-big',
    dots: false,
    centerMode: false,
    focusOnSelect: true,
    responsive: [
      {
        breakpoint: 1200,
        settings: {
          slidesToShow: 2
        }
      }
    ]
  });

});
$(document).ready(function(){
  // Ползунок для форм
  
  function sliderForm( inputStart, inputEnd, idSlider, dataStart, dataEnd ) {
    var priceStart = $(inputStart).data( dataStart );
    var priceEnd = $(inputEnd).data( dataEnd );

    $( idSlider ).slider({
      // orientation: "vertical",
      // step: 15,
      range: true,
      min: priceStart,
      max: priceEnd,
      values: [ priceStart, priceEnd ],
      slide: function( event, ui ) {
        $( inputStart ).val( ui.values[ 0 ] );
        $( inputEnd ).val( ui.values[ 1 ] );
      }
    });
    $( inputStart ).val( $( idSlider ).slider( "values", 0 ) );
    $( inputEnd ).val( $( idSlider ).slider( "values", 1 ) );

    // Изменение местоположения ползунка при вводиде данных в первый элемент input
    $( inputStart ).change(function(){
      var value1=$( inputStart ).val();
      var value2=$( inputEnd ).val();

      if (parseInt(value1) > parseInt(value2)){
        value1 = value2;
        $( inputStart ).val(value1);
      }
      $(idSlider).slider("values",0,value1); 
    });
        
    // Изменение местоположения ползунка при вводиде данных в второй элемент input  
    $( inputEnd ).change(function(){
      var value1=$( inputStart ).val();
      var value2=$( inputEnd ).val();

      if(parseInt(value1) > parseInt(value2)){
        value2 = value1;
        $( inputEnd ).val(value2);
      }
      $(idSlider).slider("values",1,value2);
    });

    // фильтрация ввода в поля
    jQuery('#amount_start, #amount_end').keypress(function(event){
      var key, keyChar;
      if(!event) var event = window.event;
      
      if (event.keyCode) key = event.keyCode;
      else if(event.which) key = event.which;
    
      if(key==null || key==0 || key==8 || key==13 || key==9 || key==46 || key==37 || key==39 ) return true;
      keyChar=String.fromCharCode(key);
      
      if(!/\d/.test(keyChar)) return false;
    
    });

  }

  sliderForm('.projects-filter__cost--start', '.projects-filter__cost--end', '#project-slider-ui', 'proj-start', 'proj-end');
  sliderForm('.form__cost--start', '.form__cost--end', '#form-slider-ui', 'price-start', 'price-end');

});
$(document).ready(function(){

  function telMask(selector) {
    $(selector).mask('+7 (000) 000-00-00');
  }

  telMask('.contact-form__input--tel');
  telMask('.consult__input-tel');

});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1cmdlci5qcyIsImNvdW50ZG93bi5qcyIsImRyb3Bkb3duLWZpbHRlci5qcyIsImRyb3Bkb3duLXByb2plY3QuanMiLCJwaWxzLWRyb3Bkb3duLmpzIiwicHJvamVjdC1tb2RhbC5qcyIsInByb2plY3QtdGFicy5qcyIsInByb21vLXNsaWRlci5qcyIsInF1YW50aXR5LXByb2plY3QuanMiLCJyYXRpby1waG90by5qcyIsInJldmlldy1zbGlkZXIuanMiLCJzbGlkZXItZm9ybS5qcyIsInRlbC1tYXNrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cclxuICAvLyDQsdGD0YDQs9C10YAsINGH0YLQviDRgtGD0YIg0LXRidC1INGB0LrQsNC20LXRiNGMPyDQvdC+INCx0LXQtyDQutC+0LvRiyhcclxuICAkKCcuYnVyZ2VyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKCAkKHRoaXMpLmhhc0NsYXNzKFwiYnVyZ2VyLS1jbG9zZVwiKSApIHtcclxuICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2J1cmdlci0tY2xvc2UnKTtcclxuICAgICAgICAgICQoJy5tYWluLW5hdicpLnNsaWRlVXAoNDAwKTtcclxuICAgICAgICAgICQoJy5tYWluLW5hdicpLnJlbW92ZUNsYXNzKCdtYWluLW5hdi0tb3BlbicpO1xyXG4gICAgICAgICAgJCgnLnBhZ2UtaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ3BhZ2UtaGVhZGVyLS1vcGVuJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdidXJnZXItLWNsb3NlJyk7XHJcbiAgICAgICAgICAkKCcubWFpbi1uYXYnKS5zbGlkZURvd24oNDAwKTtcclxuICAgICAgICAgICQoJy5tYWluLW5hdicpLmFkZENsYXNzKCdtYWluLW5hdi0tb3BlbicpO1xyXG4gICAgICAgICAgJCgnLnBhZ2UtaGVhZGVyJykuYWRkQ2xhc3MoJ3BhZ2UtaGVhZGVyLS1vcGVuJyk7XHJcbiAgICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnLm5hdiB1bCBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xyXG4gICAgICAgICAgJCgnLm1haW4tbmF2Jykuc2xpZGVVcCg0MDApO1xyXG4gICAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdidXJnZXItLW9wZW4nKTtcclxuICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1jbG9zZScpO1xyXG4gICAgICB9O1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe1xyXG4gICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPiA3NjcgKSB7XHJcbiAgICAgICAgICAkKCcubWFpbi1uYXYnKS5zaG93KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKCcubWFpbi1uYXYnKS5zbGlkZVVwKDQwMCk7XHJcbiAgICAgICAgICAkKCcubWFpbi1uYXYnKS5yZW1vdmVDbGFzcygnbWFpbi1uYXYtLW9wZW4nKTtcclxuICAgICAgICAgICQoJy5wYWdlLWhlYWRlcicpLnJlbW92ZUNsYXNzKCdwYWdlLWhlYWRlci0tb3BlbicpO1xyXG4gICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdidXJnZXItLWNsb3NlJyk7XHJcbiAgICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbihlKSB7IC8vINC+0YLRgdC70LXQttC40LLQsNC10Lwg0YHQvtCx0YvRgtC40LUg0L3QsCDRjdC70LXQvNC10L3RgtC1IHdpbmRvd1xyXG4gICAgaWYoICQod2luZG93KS53aWR0aCgpIDwgNzY4ICkge1xyXG4gICAgICAgICQoJy5tYWluLW5hdicpLnNsaWRlVXAoNDAwKTtcclxuICAgICAgICAkKCcubWFpbi1uYXYnKS5yZW1vdmVDbGFzcygnbWFpbi1uYXYtLW9wZW4nKTtcclxuICAgICAgICAkKCcucGFnZS1oZWFkZXInKS5yZW1vdmVDbGFzcygncGFnZS1oZWFkZXItLW9wZW4nKTtcclxuICAgICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2J1cmdlci0tY2xvc2UnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgaWYgKCAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAxMDAgJiYgJCh3aW5kb3cpLndpZHRoKCkgPiA3NjcpIHtcclxuICAgICQoJy5wYWdlLWhlYWRlcicpLmFkZENsYXNzKCdwYWdlLWhlYWRlci0tc2Nyb2xsJyk7XHJcbiAgICAkKCcucGFnZS1oZWFkZXInKS5hZGRDbGFzcygncGFnZS1oZWFkZXItLWRlc2t0b3AnKTtcclxuICB9IGVsc2UgaWYgKCAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAxMDAgKSB7XHJcbiAgICAkKCcucGFnZS1oZWFkZXInKS5hZGRDbGFzcygncGFnZS1oZWFkZXItLXNjcm9sbCcpO1xyXG4gIH1cclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgaWYgKCAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAxMDAgJiYgJCh3aW5kb3cpLndpZHRoKCkgPiAxMTk5ICkge1xyXG4gICAgICAkKCcucGFnZS1oZWFkZXInKS5hZGRDbGFzcygncGFnZS1oZWFkZXItLXNjcm9sbCcpO1xyXG4gICAgICAkKCcucGFnZS1oZWFkZXInKS5hZGRDbGFzcygncGFnZS1oZWFkZXItLWRlc2t0b3AnKTtcclxuICAgIH0gZWxzZSBpZiAoICQod2luZG93KS5zY3JvbGxUb3AoKSA+IDEwMCApIHtcclxuICAgICAgJCgnLnBhZ2UtaGVhZGVyJykuYWRkQ2xhc3MoJ3BhZ2UtaGVhZGVyLS1zY3JvbGwnKTtcclxuICAgICAgJCgnLnBhZ2UtaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ3BhZ2UtaGVhZGVyLS1kZXNrdG9wJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKCcucGFnZS1oZWFkZXInKS5yZW1vdmVDbGFzcygncGFnZS1oZWFkZXItLXNjcm9sbCcpO1xyXG4gICAgICAkKCcucGFnZS1oZWFkZXInKS5yZW1vdmVDbGFzcygncGFnZS1oZWFkZXItLWRlc2t0b3AnKTtcclxuICAgIH1cclxuXHJcbiAgfSk7XHJcblxyXG59KTsiLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cclxuICAkKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIGRhdGVFbmQgPSAkKCcjY291bnRkb3duLXByb21vJykuZGF0YSgndGltZXItaG91cnMnKTtcclxuICBcclxuICAgIHZhciBub3RlID0gJCgnI25vdGUnKSxcclxuICAgICAgdHMgPSBuZXcgRGF0ZSgyMDEyLCAwLCAxKSxcclxuICAgICAgbmV3WWVhciA9IHRydWU7XHJcbiAgICBcclxuICAgIGlmKChuZXcgRGF0ZSgpKSA+IHRzKXtcclxuICAgICAgLy8gVGhlIG5ldyB5ZWFyIGlzIGhlcmUhIENvdW50IHRvd2FyZHMgc29tZXRoaW5nIGVsc2UuXHJcbiAgICAgIC8vIE5vdGljZSB0aGUgKjEwMDAgYXQgdGhlIGVuZCAtIHRpbWUgbXVzdCBiZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAgdHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgZGF0ZUVuZCoyNCo2MCo2MCoxMDAwO1xyXG4gICAgICBuZXdZZWFyID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgICAgXHJcbiAgICAkKCcjY291bnRkb3duLXByb21vJykuY291bnRkb3duKHtcclxuICAgICAgdGltZXN0YW1wIDogdHMsXHJcbiAgICAgIGNhbGxiYWNrICA6IGZ1bmN0aW9uKGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKXtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IFwiXCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWVzc2FnZSArPSBkYXlzICsgXCIgZGF5XCIgKyAoIGRheXM9PTEgPyAnJzoncycgKSArIFwiLCBcIjtcclxuICAgICAgICBtZXNzYWdlICs9IGhvdXJzICsgXCIgaG91clwiICsgKCBob3Vycz09MSA/ICcnOidzJyApICsgXCIsIFwiO1xyXG4gICAgICAgIG1lc3NhZ2UgKz0gbWludXRlcyArIFwiIG1pbnV0ZVwiICsgKCBtaW51dGVzPT0xID8gJyc6J3MnICkgKyBcIiBhbmQgXCI7XHJcbiAgICAgICAgbWVzc2FnZSArPSBzZWNvbmRzICsgXCIgc2Vjb25kXCIgKyAoIHNlY29uZHM9PTEgPyAnJzoncycgKSArIFwiIDxiciAvPlwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKG5ld1llYXIpe1xyXG4gICAgICAgICAgbWVzc2FnZSArPSBcImxlZnQgdW50aWwgdGhlIG5ldyB5ZWFyIVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIG1lc3NhZ2UgKz0gXCJsZWZ0IHRvIDEwIGRheXMgZnJvbSBub3chXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIG5vdGUuaHRtbChtZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICB9KTtcclxuXHJcbn0pOyIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vINCX0LDQutGA0YvRgtC40LUg0LTRgNC+0L/QtNCw0YPQvdC+0LIg0L/QviDQutC70LjQutGDINCy0L3QtSDQuNGFXHJcblxyXG4gIGZ1bmN0aW9uIGNsb3NlT3V0RHJvcGRvd24oZHJvcERvd24sIGlucHV0KSB7XHJcblxyXG4gICAgJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSl7IC8vINGB0L7QsdGL0YLQuNC1INC60LvQuNC60LAg0L/QviDQstC10LEt0LTQvtC60YPQvNC10L3RgtGDXHJcbiAgICAgIHZhciBkcm9wID0gJChkcm9wRG93bik7IC8vINGC0YPRgiDRg9C60LDQt9GL0LLQsNC10LwgSUQg0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgICB2YXIgaW5wID0gJChpbnB1dCk7XHJcbiAgICAgIGlmIChpbnAuaXMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9IGVsc2UgaWYgKCFkcm9wLmlzKGUudGFyZ2V0KSAvLyDQtdGB0LvQuCDQutC70LjQuiDQsdGL0Lsg0L3QtSDQv9C+INC90LDRiNC10LzRgyDQsdC70L7QutGDXHJcbiAgICAgICAgICAmJiBkcm9wLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7IC8vINC4INC90LUg0L/QviDQtdCz0L4g0LTQvtGH0LXRgNC90LjQvCDRjdC70LXQvNC10L3RgtCw0LxcclxuICAgICAgICBkcm9wLmhpZGUoKTsgLy8g0YHQutGA0YvQstCw0LXQvCDQtdCz0L5cclxuICAgICAgfSBcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIGNsb3NlT3V0RHJvcGRvd24oJy5mb3JtX19kcm9wZG93bicsICcuZm9ybV9fc2VsZWN0ZWQnKTtcclxuICBjbG9zZU91dERyb3Bkb3duKCcucHJvamVjdHMtZmlsdGVyX19kcm9wZG93bicsICcucHJvamVjdHMtZmlsdGVyX19zZWxlY3RlZCcpO1xyXG4gIGNsb3NlT3V0RHJvcGRvd24oJy5mb3JtLXJldmlld19fZHJvcGRvd24nLCAnLmZvcm0tcmV2aWV3X19zZWxlY3RlZCcpO1xyXG5cclxuICBmdW5jdGlvbiBjbGlja1NlbGVjdChzZWxlY3QsIGRyb3BMaXN0KXtcclxuXHJcbiAgICAkKHNlbGVjdCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICBcclxuICAgICAgdmFyIGRyb3BEb3duID0gJCh0aGlzKS5maW5kKGRyb3BMaXN0KTtcclxuICAgICAgdmFyIGV2ZXJEcm9wRG93biA9ICQoZHJvcExpc3QpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCBkcm9wRG93bi5pcygnOnZpc2libGUnKSApIHtcclxuICAgICAgICBldmVyRHJvcERvd24uaGlkZSgpO1xyXG4gICAgICB9IGVsc2UgaWYgKCBkcm9wRG93bi5pcygnOmhpZGRlbicpICkge1xyXG4gICAgICAgIGV2ZXJEcm9wRG93bi5oaWRlKCk7XHJcbiAgICAgICAgZHJvcERvd24uc2hvdygpO1xyXG4gICAgICB9IFxyXG4gICAgICBcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIGNsaWNrU2VsZWN0KCcuZm9ybV9fc2VsZWN0JywgJy5mb3JtX19kcm9wZG93bicpO1xyXG4gIGNsaWNrU2VsZWN0KCcucHJvamVjdHMtZmlsdGVyX19zZWxlY3QnLCAnLnByb2plY3RzLWZpbHRlcl9fZHJvcGRvd24nKTtcclxuICBjbGlja1NlbGVjdCgnLmZvcm0tcmV2aWV3X19zZWxlY3QnLCAnLmZvcm0tcmV2aWV3X19kcm9wZG93bicpO1xyXG5cclxufSk7IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuICBcclxuICBmdW5jdGlvbiBjbG9zZU91dERyb3Bkb3duKGRyb3BEb3duLCBpbnB1dCkge1xyXG5cclxuICAgICAgJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSl7IC8vINGB0L7QsdGL0YLQuNC1INC60LvQuNC60LAg0L/QviDQstC10LEt0LTQvtC60YPQvNC10L3RgtGDXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCAkKCcucHJvamVjdC1mb3JtX192YWx1ZS1saXN0JykuaGFzQ2xhc3MoJ3Byb2plY3QtZm9ybV9fdmFsdWUtbGlzdC0tYWN0aXZlJykpIHtcclxuICAgICAgICAgIHZhciBkcm9wID0gJChkcm9wRG93bik7IC8vINGC0YPRgiDRg9C60LDQt9GL0LLQsNC10LwgSUQg0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgICAgICAgdmFyIGlucCA9ICQoaW5wdXQpO1xyXG4gICAgICAgICAgaWYgKGlucC5pcyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghZHJvcC5pcyhlLnRhcmdldCkgLy8g0LXRgdC70Lgg0LrQu9C40Log0LHRi9C7INC90LUg0L/QviDQvdCw0YjQtdC80YMg0LHQu9C+0LrRg1xyXG4gICAgICAgICAgICAgICYmIGRyb3AuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApIHsgLy8g0Lgg0L3QtSDQv9C+INC10LPQviDQtNC+0YfQtdGA0L3QuNC8INGN0LvQtdC80LXQvdGC0LDQvFxyXG4gICAgICAgICAgICBkcm9wLnJlbW92ZUNsYXNzKCdwcm9qZWN0LWZvcm1fX3ZhbHVlLWxpc3QtLWFjdGl2ZScpOyAvLyDRgdC60YDRi9Cy0LDQtdC8INC10LPQvlxyXG4gICAgICAgICAgfSBcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgfVxyXG4gIFxyXG4gIGNsb3NlT3V0RHJvcGRvd24oJy5wcm9qZWN0LWZvcm1fX3ZhbHVlLWxpc3QnLCAnLnByb2plY3QtZm9ybV9fdmFsdWUtbGFiZWwnKTtcclxuICBcclxuICBcclxuICAkKCcucHJvamVjdC1mb3JtX192YWx1ZS1sYWJlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICBcclxuICAgIHZhciBpbnB1dElkID0gJCggdGhpcyApLmF0dHIoJ2ZvcicpO1xyXG4gICAgdmFyIGlucHV0VGhpcyA9ICQgKCcjJyArIGlucHV0SWQgKTtcclxuICAgIHZhciBwYXJlbnQgPSAkKCB0aGlzICkucGFyZW50KCk7XHJcbiAgICBcclxuICAgIGlmICggaW5wdXRUaGlzLnByb3AoXCJjaGVja2VkXCIpICkge1xyXG4gICAgICAkKCcucHJvamVjdC1mb3JtX192YWx1ZS1saXN0JykucmVtb3ZlQ2xhc3MoJ3Byb2plY3QtZm9ybV9fdmFsdWUtbGlzdC0tYWN0aXZlJyk7XHJcbiAgICAgICQoIHBhcmVudCApLmFkZENsYXNzKCdwcm9qZWN0LWZvcm1fX3ZhbHVlLWxpc3QtLWFjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJCggcGFyZW50ICkucmVtb3ZlQ2xhc3MoJ3Byb2plY3QtZm9ybV9fdmFsdWUtbGlzdC0tYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9KTtcclxuICBcclxufSk7IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHJcbiAgJCgnLnByb2plY3QtZm9ybV9fdGl0bGUtLWFjY29yZGVvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIHNob3dCbG9jayA9ICQoJyNkcm9wZG93bi10YWJsZScpO1xyXG5cclxuICAgIGlmICggKHNob3dCbG9jayApLmhhc0NsYXNzKCdwcm9qZWN0LWZvcm1fX3RhYmxlLS1oaWRlJykgKSB7XHJcbiAgICAgICQoIHRoaXMgKS5hZGRDbGFzcygncHJvamVjdC1mb3JtX190aXRsZS0tb3BlbicpO1xyXG4gICAgICAkKHNob3dCbG9jaykuc2xpZGVEb3duKDIwMCk7XHJcbiAgICAgICQoc2hvd0Jsb2NrKS5yZW1vdmVDbGFzcygncHJvamVjdC1mb3JtX190YWJsZS0taGlkZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJCggdGhpcyApLnJlbW92ZUNsYXNzKCdwcm9qZWN0LWZvcm1fX3RpdGxlLS1vcGVuJyk7XHJcbiAgICAgICQoc2hvd0Jsb2NrKS5zbGlkZVVwKDIwMCk7XHJcbiAgICAgICQoc2hvd0Jsb2NrKS5hZGRDbGFzcygncHJvamVjdC1mb3JtX190YWJsZS0taGlkZScpO1xyXG4gICAgfVxyXG5cclxuICB9KTtcclxuXHJcbn0pOyIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vINCe0L/RgNC10LTQtdC70Y/QtdC8INC/0LXRgNC10LzQtdC90L3Ri9C1INC00LvRjyDQt9C90LDRh9C60LAgaW5mb1xyXG4gIHZhciBpbmZvQ2xhc3MgPSAncHJvamVjdC1mb3JtX19pbmZvJztcclxuICB2YXIgaW5mb0ljb24gPSAkKCcuJyArIGluZm9DbGFzcyk7XHJcblxyXG4gIC8vINCe0L/RgNC10LTQtdC70Y/QtdC8INC/0LXRgNC10LzQtdC90L3Ri9C1INC00LvRjyDQvNC+0LTQsNC70LrQuFxyXG4gIHZhciBtb2RhbENsYXNzID0gJ3Byb2plY3QtbW9kYWwnO1xyXG4gIHZhciBtb2RhbCA9ICQoJy4nICsgbW9kYWxDbGFzcyk7XHJcblxyXG4gIGluZm9JY29uLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgbG9naWM7XHJcblxyXG4gICAgaWYgKCAkKHRoaXMpLmhhc0NsYXNzKGluZm9DbGFzcyArICctLW9wZW4nKSApIHtcclxuICAgICAgaW5mb0ljb24ucmVtb3ZlQ2xhc3MoaW5mb0NsYXNzICsgJy0tb3BlbicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaW5mb0ljb24ucmVtb3ZlQ2xhc3MoaW5mb0NsYXNzICsgJy0tb3BlbicpO1xyXG4gICAgICAkKHRoaXMpLmFkZENsYXNzKGluZm9DbGFzcyArICctLW9wZW4nKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIGluZm9JY29uLmhhc0NsYXNzKGluZm9DbGFzcyArICctLW9wZW4nKSApIHtcclxuICAgICAgbW9kYWxPcGVuKCB0aGlzICwgbW9kYWxDbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtb2RhbENsb3NlKCBtb2RhbENsYXNzICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kYWxPcGVuKGluZm9JdGVtLCBtb2RhbENsYXNzKSB7XHJcblxyXG4gICAgICB2YXIgaWNvbkNvb3JkWCA9ICQoaW5mb0l0ZW0pLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgIHZhciBpY29uQ29vcmRZID0gJChpbmZvSXRlbSkub2Zmc2V0KCkudG9wO1xyXG5cclxuICAgICAgdmFyIG1vZGFsID0gJCgnLicgKyBtb2RhbENsYXNzKTtcclxuICAgICAgdmFyIG1vZGFsV2lkdGggPSBtb2RhbC5vdXRlcldpZHRoKCk7XHJcbiAgICAgIHZhciBtb2RhbEhlaWdodCA9IG1vZGFsLm91dGVySGVpZ2h0KCk7XHJcblxyXG4gICAgICB2YXIgbW9kYWxDb29yZFggPSBpY29uQ29vcmRYIC0gMzA7XHJcbiAgICAgIHZhciBtb2RhbENvb3JkWSA9IGljb25Db29yZFkgLSBtb2RhbEhlaWdodCAtIDEwO1xyXG5cclxuICAgICAgbW9kYWwuYWRkQ2xhc3MobW9kYWxDbGFzcyArICctLW9wZW4nKTtcclxuXHJcbiAgICAgIGlmICggJCh3aW5kb3cpLndpZHRoKCkgPiAxMTk5ICkge1xyXG4gICAgICAgIG1vZGFsLmNzcyh7XHJcbiAgICAgICAgICBcInRvcFwiOiBtb2RhbENvb3JkWSwgXHJcbiAgICAgICAgICBcImxlZnRcIjogbW9kYWxDb29yZFhcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIGlmICggJCh3aW5kb3cpLndpZHRoKCkgPCA3NjggKSB7XHJcbiAgICAgICAgbW9kYWwuY3NzKHtcclxuICAgICAgICAgIFwidG9wXCI6IG1vZGFsQ29vcmRZICsgbW9kYWxIZWlnaHQgKyA0MCwgXHJcbiAgICAgICAgICBcImxlZnRcIjogMCxcclxuICAgICAgICAgIFwicmlnaHRcIjogMCxcclxuICAgICAgICAgIFwibWFyZ2luXCI6IFwiYXV0b1wiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbW9kYWwuY3NzKHtcclxuICAgICAgICAgIFwidG9wXCI6IG1vZGFsQ29vcmRZLCBcclxuICAgICAgICAgIFwibGVmdFwiOiBcIjE1MHB4XCJcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtb2RhbENsb3NlKG1vZGFsQ2xhc3MpIHtcclxuICAgICAgdmFyIG1vZGFsID0gJCgnLicgKyBtb2RhbENsYXNzKTtcclxuICAgICAgbW9kYWwucmVtb3ZlQ2xhc3MobW9kYWxDbGFzcyArICctLW9wZW4nKTtcclxuICAgIH1cclxuXHJcbiAgfSlcclxuXHJcbn0pOyIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblxyXG4gIGZ1bmN0aW9uIHRhYnMoYm94VGFic0xpbmssIGJveFRhYnNDb250ZW50LCB0YWJzKXsgXHJcbiAgICAkKGJveFRhYnNMaW5rICsgJyBpbnB1dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICB2YXIgYXR0ckxpbmsgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XHJcbiAgICAgICQoYm94VGFic0NvbnRlbnQgKyAnICcgKyB0YWJzKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgJChib3hUYWJzQ29udGVudCArICcgLicgKyBhdHRyTGluaykuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgfSk7IFxyXG4gIH07XHJcblxyXG5cclxuICB0YWJzKCcjdGFicy1yb29mJywgJyN0YWJzLXJvb2YtY29udGVudCcsICcucHJvamVjdC1mb3JtX190YWJsZS1zZWxlY3QtLXJvb2YtY29udGVudCcpO1xyXG4gIHRhYnMoJyN0YWJzLWZyYW1lJywgJyN0YWJzLWZyYW1lLWNvbnRlbnQnLCAnLnByb2plY3QtZm9ybV9fdGFiLWl0ZW0nKTtcclxuXHJcbn0pOyIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblxyXG4gICQoJy5wcm9tby1zbGlkZXInKS5zbGljayh7XHJcbiAgICBkb3RzOiB0cnVlXHJcbiAgICAvLyBhdXRvcGxheTogdHJ1ZSxcclxuICAgIC8vIGF1dG9wbGF5U3BlZWQ6IDUwMFxyXG4gIH0pO1xyXG5cclxufSk7IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHJcbiAgZnVuY3Rpb24gYWJjMihuKSB7XHJcbiAgICBuICs9IFwiXCI7XHJcbiAgICBuID0gbmV3IEFycmF5KDQgLSBuLmxlbmd0aCAlIDMpLmpvaW4oXCJVXCIpICsgbjtcclxuICAgIHJldHVybiBuLnJlcGxhY2UoLyhbMC05VV17M30pL2csIFwiJDEgXCIpLnJlcGxhY2UoL1UvZywgXCJcIik7XHJcbiAgfVxyXG5cclxuICAkKCcucHJvamVjdC1mb3JtX19wbHVzLW1pbnVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIHZhciB0aGlzRWxlbSA9ICQodGhpcyk7XHJcbiAgICB2YXIgaW5wdXQgPSAkKCcucHJvamVjdC1mb3JtX19pbnB1dC1xdWFudCcpO1xyXG4gICAgdmFyIHZhbHVlID0gTnVtYmVyKCBpbnB1dC52YWwoKSApO1xyXG4gICAgdmFyIHByaWNlID0gJCgnI3BpbGUtcHJpY2UnKS5kYXRhKCAnb25lLXByaWNlJyApO1xyXG5cclxuICAgIGlmICggdmFsdWUgPT0gMCAmJiAkKHRoaXNFbGVtKS5oYXNDbGFzcyggJ3Byb2plY3QtZm9ybV9fcGx1cy1taW51cy0tcGx1cycgKSApIHtcclxuICAgICAgdmFsdWUgPSB2YWx1ZSArIDE7XHJcbiAgICAgICQoaW5wdXQpLnZhbCh2YWx1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKCB2YWx1ZSA9PSAwICl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH0gZWxzZSBpZiAoICQodGhpc0VsZW0pLmhhc0NsYXNzKCAncHJvamVjdC1mb3JtX19wbHVzLW1pbnVzLS1wbHVzJyApICl7XHJcbiAgICAgIHZhbHVlID0gdmFsdWUgKyAxO1xyXG4gICAgICAkKGlucHV0KS52YWwodmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFsdWUgPSB2YWx1ZSAtIDE7XHJcbiAgICAgICQoaW5wdXQpLnZhbCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHByaWNlU3VtbSA9IGFiYzIocHJpY2UgKiB2YWx1ZSk7XHJcblxyXG4gICAgJCgnI3ByaWNlLXN1bW0nKS50ZXh0KHByaWNlU3VtbSk7XHJcblxyXG4gIH0pXHJcblxyXG5cclxuICAkKCcucHJvamVjdC1mb3JtX19hY3Rpb24tbGFiZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBwYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgpO1xyXG4gICAgdmFyIGNoZWNrID0gJChwYXJlbnQpLmZpbmQoJy5wcm9qZWN0LWZvcm1fX2FjdGlvbi1jaGVjaycpO1xyXG5cclxuICAgIGlmICggJChjaGVjaykucHJvcChcImNoZWNrZWRcIikgKSB7XHJcbiAgICAgICQodGhpcykudGV4dCgn0JTQvtCx0LDQstC40YLRjCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJCh0aGlzKS50ZXh0KCfQlNC+0LHQsNCy0LvQtdC90L4nKTtcclxuICAgIH1cclxuXHJcbiAgfSk7XHJcblxyXG59KTsiLCIkKHdpbmRvdykubG9hZChmdW5jdGlvbigpIHtcclxuXHJcbiAgZnVuY3Rpb24gcmF0aW9QaG90byhibG9jaykge1xyXG4gICAgJChibG9jaykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICB2YXIgaXRlbVdpZHRoID0gJCh0aGlzKS53aWR0aCgpO1xyXG4gICAgICB2YXIgaXRlbUhlaWdodCA9ICQodGhpcykuaGVpZ2h0KCk7XHJcbiAgICAgIHZhciBpdGVtUmF0aW8gPSBpdGVtSGVpZ2h0IC8gaXRlbVdpZHRoO1xyXG5cclxuICAgICAgdmFyIHBob3RvID0gJCh0aGlzKS5maW5kKCdpbWcnKTtcclxuICAgICAgdmFyIHBob3RvV2lkdGggPSBwaG90by53aWR0aCgpO1xyXG4gICAgICB2YXIgcGhvdG9IZWlnaHQgPSBwaG90by5oZWlnaHQoKTtcclxuICAgICAgdmFyIHBob3RvUmF0aW8gPSBwaG90b0hlaWdodCAvIHBob3RvV2lkdGg7XHJcblxyXG4gICAgICBpZiAoIGl0ZW1SYXRpbyA8IHBob3RvUmF0aW8gKSB7XHJcbiAgICAgICAgcGhvdG8ud2lkdGgoJzEwMCUnKTtcclxuICAgICAgICBwaG90by5oZWlnaHQoJ2F1dG8nKTtcclxuICAgICAgfSBlbHNlIGlmIChpdGVtUmF0aW8gPiBwaG90b1JhdGlvKSB7XHJcbiAgICAgICAgcGhvdG8uaGVpZ2h0KCcxMDAlJyk7XHJcbiAgICAgICAgcGhvdG8ud2lkdGgoJ2F1dG8nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwaG90by53aWR0aCgnMTAwJScpO1xyXG4gICAgICAgIHBob3RvLmhlaWdodCgnYXV0bycpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJhdGlvTGV0dGVyKGJsb2NrKSB7XHJcbiAgICAkKGJsb2NrKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciBpdGVtV2lkdGggPSAkKHRoaXMpLndpZHRoKCk7XHJcbiAgICAgIHZhciBpdGVtSGVpZ2h0ID0gJCh0aGlzKS5oZWlnaHQoKTtcclxuICAgICAgdmFyIGl0ZW1SYXRpbyA9IGl0ZW1IZWlnaHQgLyBpdGVtV2lkdGg7XHJcblxyXG4gICAgICB2YXIgcGhvdG8gPSAkKHRoaXMpLmZpbmQoJ2ltZycpO1xyXG4gICAgICB2YXIgcGhvdG9XaWR0aCA9IHBob3RvLndpZHRoKCk7XHJcbiAgICAgIHZhciBwaG90b0hlaWdodCA9IHBob3RvLmhlaWdodCgpO1xyXG4gICAgICB2YXIgcGhvdG9SYXRpbyA9IHBob3RvSGVpZ2h0IC8gcGhvdG9XaWR0aDtcclxuXHJcbiAgICAgIGlmICggaXRlbVJhdGlvID4gcGhvdG9SYXRpbyApIHtcclxuICAgICAgICBwaG90by53aWR0aCgnMTAwJScpO1xyXG4gICAgICB9IGVsc2UgaWYgKGl0ZW1SYXRpbyA8IHBob3RvUmF0aW8pIHtcclxuICAgICAgICBwaG90by5oZWlnaHQoJzEwMCUnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwaG90by53aWR0aCgnMTAwJScpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJhdGlvUGhvdG8oJy5yZXZpZXdfX3NsaWRlci1wcmV2aWV3LWl0ZW0nKTtcclxuICByYXRpb1Bob3RvKCcucmV2aWV3X19zbGlkZXItYmlnLWl0ZW0nKTtcclxuICByYXRpb0xldHRlcignLnJldmlld19fbGV0dGVyLWJveCcpO1xyXG4gIHJhdGlvTGV0dGVyKCcucmV2aWV3X19jaGFydC1ib3gnKTtcclxuICByYXRpb1Bob3RvKCcuZ2FsbGVyeV9faXRlbScpO1xyXG4gIHJhdGlvUGhvdG8oJy5wcm9qZWN0LWNhcmRfX3Bob3RvJyk7XHJcbiAgcmF0aW9QaG90bygnLnJldmlldy1jYXJkX192aXN1YWwnKTtcclxuICByYXRpb1Bob3RvKCcucHJvamVjdF9fcGhvdG8nKTtcclxuXHJcbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe1xyXG4gICAgcmF0aW9QaG90bygnLnJldmlld19fc2xpZGVyLXByZXZpZXctaXRlbScpO1xyXG4gICAgcmF0aW9QaG90bygnLnJldmlld19fc2xpZGVyLWJpZy1pdGVtJyk7XHJcbiAgICByYXRpb0xldHRlcignLnJldmlld19fbGV0dGVyLWJveCcpO1xyXG4gICAgcmF0aW9MZXR0ZXIoJy5yZXZpZXdfX2NoYXJ0LWJveCcpO1xyXG4gICAgcmF0aW9QaG90bygnLmdhbGxlcnlfX2l0ZW0nKTtcclxuICAgIHJhdGlvUGhvdG8oJy5wcm9qZWN0LWNhcmRfX3Bob3RvJyk7XHJcbiAgICByYXRpb1Bob3RvKCcucmV2aWV3LWNhcmRfX3Zpc3VhbCcpO1xyXG4gICAgcmF0aW9QaG90bygnLnByb2plY3RfX3Bob3RvJyk7XHJcbiAgfSk7XHJcblxyXG59KTsiLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cclxuICAkKCcucmV2aWV3X19zbGlkZXItYmlnJykuc2xpY2soe1xyXG4gICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgZmFkZTogdHJ1ZSxcclxuICAgIGFzTmF2Rm9yOiAnLnJldmlld19fc2xpZGVyLXByZXZpZXcnXHJcbiAgfSk7XHJcblxyXG4gICQoJy5yZXZpZXdfX3NsaWRlci1wcmV2aWV3Jykuc2xpY2soe1xyXG4gICAgc2xpZGVzVG9TaG93OiA0LFxyXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICBhc05hdkZvcjogJy5yZXZpZXdfX3NsaWRlci1iaWcnLFxyXG4gICAgZG90czogZmFsc2UsXHJcbiAgICBjZW50ZXJNb2RlOiBmYWxzZSxcclxuICAgIGZvY3VzT25TZWxlY3Q6IHRydWUsXHJcbiAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBicmVha3BvaW50OiAxMjAwLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9KTtcclxuXHJcbn0pOyIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcbiAgLy8g0J/QvtC70LfRg9C90L7QuiDQtNC70Y8g0YTQvtGA0LxcclxuICBcclxuICBmdW5jdGlvbiBzbGlkZXJGb3JtKCBpbnB1dFN0YXJ0LCBpbnB1dEVuZCwgaWRTbGlkZXIsIGRhdGFTdGFydCwgZGF0YUVuZCApIHtcclxuICAgIHZhciBwcmljZVN0YXJ0ID0gJChpbnB1dFN0YXJ0KS5kYXRhKCBkYXRhU3RhcnQgKTtcclxuICAgIHZhciBwcmljZUVuZCA9ICQoaW5wdXRFbmQpLmRhdGEoIGRhdGFFbmQgKTtcclxuXHJcbiAgICAkKCBpZFNsaWRlciApLnNsaWRlcih7XHJcbiAgICAgIC8vIG9yaWVudGF0aW9uOiBcInZlcnRpY2FsXCIsXHJcbiAgICAgIC8vIHN0ZXA6IDE1LFxyXG4gICAgICByYW5nZTogdHJ1ZSxcclxuICAgICAgbWluOiBwcmljZVN0YXJ0LFxyXG4gICAgICBtYXg6IHByaWNlRW5kLFxyXG4gICAgICB2YWx1ZXM6IFsgcHJpY2VTdGFydCwgcHJpY2VFbmQgXSxcclxuICAgICAgc2xpZGU6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XHJcbiAgICAgICAgJCggaW5wdXRTdGFydCApLnZhbCggdWkudmFsdWVzWyAwIF0gKTtcclxuICAgICAgICAkKCBpbnB1dEVuZCApLnZhbCggdWkudmFsdWVzWyAxIF0gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCBpbnB1dFN0YXJ0ICkudmFsKCAkKCBpZFNsaWRlciApLnNsaWRlciggXCJ2YWx1ZXNcIiwgMCApICk7XHJcbiAgICAkKCBpbnB1dEVuZCApLnZhbCggJCggaWRTbGlkZXIgKS5zbGlkZXIoIFwidmFsdWVzXCIsIDEgKSApO1xyXG5cclxuICAgIC8vINCY0LfQvNC10L3QtdC90LjQtSDQvNC10YHRgtC+0L/QvtC70L7QttC10L3QuNGPINC/0L7Qu9C30YPQvdC60LAg0L/RgNC4INCy0LLQvtC00LjQtNC1INC00LDQvdC90YvRhSDQsiDQv9C10YDQstGL0Lkg0Y3Qu9C10LzQtdC90YIgaW5wdXRcclxuICAgICQoIGlucHV0U3RhcnQgKS5jaGFuZ2UoZnVuY3Rpb24oKXtcclxuICAgICAgdmFyIHZhbHVlMT0kKCBpbnB1dFN0YXJ0ICkudmFsKCk7XHJcbiAgICAgIHZhciB2YWx1ZTI9JCggaW5wdXRFbmQgKS52YWwoKTtcclxuXHJcbiAgICAgIGlmIChwYXJzZUludCh2YWx1ZTEpID4gcGFyc2VJbnQodmFsdWUyKSl7XHJcbiAgICAgICAgdmFsdWUxID0gdmFsdWUyO1xyXG4gICAgICAgICQoIGlucHV0U3RhcnQgKS52YWwodmFsdWUxKTtcclxuICAgICAgfVxyXG4gICAgICAkKGlkU2xpZGVyKS5zbGlkZXIoXCJ2YWx1ZXNcIiwwLHZhbHVlMSk7IFxyXG4gICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAvLyDQmNC30LzQtdC90LXQvdC40LUg0LzQtdGB0YLQvtC/0L7Qu9C+0LbQtdC90LjRjyDQv9C+0LvQt9GD0L3QutCwINC/0YDQuCDQstCy0L7QtNC40LTQtSDQtNCw0L3QvdGL0YUg0LIg0LLRgtC+0YDQvtC5INGN0LvQtdC80LXQvdGCIGlucHV0ICBcclxuICAgICQoIGlucHV0RW5kICkuY2hhbmdlKGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciB2YWx1ZTE9JCggaW5wdXRTdGFydCApLnZhbCgpO1xyXG4gICAgICB2YXIgdmFsdWUyPSQoIGlucHV0RW5kICkudmFsKCk7XHJcblxyXG4gICAgICBpZihwYXJzZUludCh2YWx1ZTEpID4gcGFyc2VJbnQodmFsdWUyKSl7XHJcbiAgICAgICAgdmFsdWUyID0gdmFsdWUxO1xyXG4gICAgICAgICQoIGlucHV0RW5kICkudmFsKHZhbHVlMik7XHJcbiAgICAgIH1cclxuICAgICAgJChpZFNsaWRlcikuc2xpZGVyKFwidmFsdWVzXCIsMSx2YWx1ZTIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g0YTQuNC70YzRgtGA0LDRhtC40Y8g0LLQstC+0LTQsCDQsiDQv9C+0LvRj1xyXG4gICAgalF1ZXJ5KCcjYW1vdW50X3N0YXJ0LCAjYW1vdW50X2VuZCcpLmtleXByZXNzKGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgdmFyIGtleSwga2V5Q2hhcjtcclxuICAgICAgaWYoIWV2ZW50KSB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSkga2V5ID0gZXZlbnQua2V5Q29kZTtcclxuICAgICAgZWxzZSBpZihldmVudC53aGljaCkga2V5ID0gZXZlbnQud2hpY2g7XHJcbiAgICBcclxuICAgICAgaWYoa2V5PT1udWxsIHx8IGtleT09MCB8fCBrZXk9PTggfHwga2V5PT0xMyB8fCBrZXk9PTkgfHwga2V5PT00NiB8fCBrZXk9PTM3IHx8IGtleT09MzkgKSByZXR1cm4gdHJ1ZTtcclxuICAgICAga2V5Q2hhcj1TdHJpbmcuZnJvbUNoYXJDb2RlKGtleSk7XHJcbiAgICAgIFxyXG4gICAgICBpZighL1xcZC8udGVzdChrZXlDaGFyKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBzbGlkZXJGb3JtKCcucHJvamVjdHMtZmlsdGVyX19jb3N0LS1zdGFydCcsICcucHJvamVjdHMtZmlsdGVyX19jb3N0LS1lbmQnLCAnI3Byb2plY3Qtc2xpZGVyLXVpJywgJ3Byb2otc3RhcnQnLCAncHJvai1lbmQnKTtcclxuICBzbGlkZXJGb3JtKCcuZm9ybV9fY29zdC0tc3RhcnQnLCAnLmZvcm1fX2Nvc3QtLWVuZCcsICcjZm9ybS1zbGlkZXItdWknLCAncHJpY2Utc3RhcnQnLCAncHJpY2UtZW5kJyk7XHJcblxyXG59KTsiLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cclxuICBmdW5jdGlvbiB0ZWxNYXNrKHNlbGVjdG9yKSB7XHJcbiAgICAkKHNlbGVjdG9yKS5tYXNrKCcrNyAoMDAwKSAwMDAtMDAtMDAnKTtcclxuICB9XHJcblxyXG4gIHRlbE1hc2soJy5jb250YWN0LWZvcm1fX2lucHV0LS10ZWwnKTtcclxuICB0ZWxNYXNrKCcuY29uc3VsdF9faW5wdXQtdGVsJyk7XHJcblxyXG59KTsiXX0=
